<!DOCTYPE html>
<html>
<head>
    <title>Test Product Update</title>
</head>
<body>
    <h1>Test de Actualizaci√≥n de Producto con Im√°genes</h1>
    <button onclick="testUpdateProduct()">Actualizar Producto ID 3</button>
    <div id="result"></div>

    <script>
    async function testUpdateProduct() {
        const resultDiv = document.getElementById('result');
        resultDiv.innerHTML = '<p>Probando actualizaci√≥n...</p>';
        
        try {
            // Simular datos de un producto
            const productData = {
                name: 'ACDC ¬∑ CBD Medicinal',
                slug: 'acdc-cbd-medicinal-test',
                sku: 'MED-FLOWER-ACDC-001',
                description: 'Cepa CBD dominante',
                short_description: 'CBD dominante sin psicoactividad',
                category_slug: 'medicinal-flores',
                product_type: 'flower',
                is_medicinal: 1,
                requires_prescription: 1,
                medical_category: 'cbd',
                base_price: 15000,
                stock_quantity: 100,
                stock_unit: 'gramos',
                unit_type: 'weight',
                base_unit: 'g',
                unit_size: 1,
                brand_id: 1,
                featured: 0,
                status: 'active',
                
                // Im√°genes de prueba (base64 simuladas)
                image: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==',
                productSecondImage: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==',
                
                cannabinoid_profile: JSON.stringify({thc: 1, cbd: 20, cbn: 0.2, cbg: 0.8, thcv: 0}),
                terpene_profile: JSON.stringify({'Mirceno': 0.5, 'Cariofileno': 0.3, 'Limoneno': 0.3, 'Pineno': 0.4}),
                strain_info: JSON.stringify({type: 'CBD dominante', genetics: 'Cannatonic', lineage: '', flowering_time: '', origin: 'California'}),
                therapeutic_info: JSON.stringify({conditions: ['Ansiedad'], benefits: ['Ansiol√≠tico'], effects: ['Calma']}),
                usage_info: JSON.stringify({recommended_time: 'Cualquier hora', dosage: {beginner: '0.3g', intermediate: '0.5g', advanced: '1g'}, administration: ['Vaporizaci√≥n'], onset: '', duration: ''}),
                safety_info: JSON.stringify({contraindications: [], side_effects: [], interactions: []}),
                attributes: JSON.stringify({aroma: 'Terroso', flavor: 'Herbal', appearance: 'Cogollos'})
            };
            
            console.log('üì§ Enviando datos:', {
                name: productData.name,
                base_price: productData.base_price,
                stock_quantity: productData.stock_quantity,
                hasImage: !!productData.image,
                hasSecondImage: !!productData.productSecondImage
            });
            
            const response = await fetch('http://localhost:3000/api/products/3', {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(productData)
            });
            
            const result = await response.json();
            
            resultDiv.innerHTML = `
                <h2>Resultado:</h2>
                <pre>${JSON.stringify(result, null, 2)}</pre>
            `;
            
            console.log('‚úÖ Resultado completo:', result);
        } catch (error) {
            resultDiv.innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
            console.error('‚ùå Error:', error);
        }
    }
    </script>
</body>
</html>

